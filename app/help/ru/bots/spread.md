# Боты

## Бот SpreadTrade

ПОШАГОВАЯ ИНСТРУКЦИЯ:

Начальные данные:

* поля base и quote: рынок, на котором должен торговать бот;
* поля balance: доступный для использования баланс для base и quote;
* поля amount: объем актива, выставляемый в ордера (абсолютное значение, если выбран value-checkbox, процент от balance, если выбран balance %-checkbox);
* поля spread: спред относительно расчетной цены для каждого актива;
* default price: цена по умолчанию, в случае если это не bitAssets;
* get price from market: брать ли цену с рынка.
При старте бот подписывается на новый блок в блокчейне. При получении нового блока он каждый раз производит проверку двух ордеров: на покупку и на продажу.

Если ордера нет, то бот проверяет, не исполнится ли новый ордер при выставлении с ценой feed_price * (1 ± spread / 100), и достаточно ли balance для выставления ордера с amount.
Если balance достаточно, и ордер не исполнится – бот выставляет новый ордер. При выставлении нового ордера поле balance уменьшается на amount.

В том случае, если ордер есть, бот сравнивает feed_price и цену ордера. Если цены разнятся больше, чем на spread / 2, и в то же время при выставлении ордера на цену feed_price * (1 ± spread / 100) алгоримт не исполнит его, принимается решение о сдвиге ордера к цене feed_price * (1 ± spread / 100).
Для этого текущий ордер отменяется, а balance увеличивается на количество актива, оставшегося в ордере. Затем выставляется новый с необходимой ценой и объемом min(balance, amount).

* Если поле balance – числовое значение. Если ордер для base был выставлен ранее, однако не был найден при очередной проверке, делается вывод об исполнении ордера. Помимо вышеописанных действий, balance для quote увеличивается согласно цене исполненного ордера. Аналогичное поведение характерно и для quote ордера.

* Если поле balance пустое. Доступным для бота балансом считается баланс привязанного аккаунта.
* Если поле balance имеет значение "-", баланс актива считается равным 0 и не меняется.

Расчет цены производится следующим образом: если выставлено get price from market, цена берется из рынка. Если Asset’ы состоят из smart-активов и core-asset (BTS), цена пересчитывается к base-активу, используя полученную из блокчейна цену. Для smart-пар не содержащих core-asset (BTS) пересчет производится в два этапа: на первом рассчитывается цена к BTS, на втором – пересчет к base-активу.

Для пар, состоящих не только из smart-активов (или только из UIA), проверяется, не установлена ли default price. Если она не установлена, то формируется запрос к binance.com. У активов второго порядка (RUDEX.BTC, RUDEX.BTC) исключаются префиксы. USD исправляется на USDT. Например, запрос RUDEX.BTC/RUDEX.USD формируется в BTC/USDT-запрос.

Если запрашиваемая пара не торгуется на binance, то цена приравнивается к 0, и торговля не ведется.

Видеоруководство вы можете найти по ссылке ниже:

https://golos.id/ru--blokcheijn/@blockchained/ru-anons-novogo-razdela-i-dvukh-publichnykh-torgovykh-botov-ot-rudex-spreadtrade-i-trailingstop